{% extends "base.html" %}

{% block title %}Upload CSV{% endblock %}

{% block content %}
<h1>Upload CSV</h1>

<!-- Flash messages for success/error notifications -->
{% if flashes %}
    <div class="flashes">
        {% for message, category in get_flashed_messages(with_categories=True) %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    </div>
{% endif %}

<!-- CSV Upload Form -->
<form action="{{ url_for('upload_csv') }}" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="csvFile">Upload CSV file:</label>
        <input type="file" id="csvFile" name="file" class="form-control" required> <!-- Added required -->
    </div>
    <button type="submit" class="btn btn-primary">Upload</button>
</form>

<!-- Display CSV Feedback if available -->
{% if csv_feedback %}
    <h2>CSV Processing Feedback:</h2>
    <ul class="list-unstyled">
        {% for feedback in csv_feedback %}
        <li>
            <div class="alert 
                {% if 'success' in feedback %}alert-success 
                {% elif 'error' in feedback %}alert-danger 
                {% else %}alert-warning{% endif %}">
                {{ feedback }}
            </div>
        </li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
